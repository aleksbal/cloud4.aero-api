{
  "openapi": "3.1.0",
  "info": {
    "title": "Flight Level Capping Service",
    "description": "API for retrieving flight level capping data as GeoJSON FeatureCollection.",
    "contact": {
      "name": "m-click.aero GmbH",
      "email": "info@m-click.aero"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "/api",
      "description": "Proxy to the API server via Swagger UI server"
    },
    {
      "url": "https://cloud4.aero",
      "description": "Production Server"
    }
  ],
  "paths": {
    "/v1/in-flight/flight-level-capping/{flightId}/{radius}": {
      "get": {
        "summary": "Retrieve flight level capping data",
        "description": "Fetches flight level capping information for a specific flight and radius.",
        "operationId": "getFlightLevelCapping",
        "parameters": [
          {
            "name": "flightId",
            "in": "path",
            "description": "Unique flight identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "radius",
            "in": "path",
            "description": "Search radius in nautical miles (NM)",
            "required": true,
            "schema": {
              "type": "number",
              "format": "float"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with flight level capping data in GeoJSON format",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureCollection"
                }
              }
            }
          },
          "400": {
            "description": "Bad request due to invalid input"
          },
          "404": {
            "description": "No data found for the given parameters"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "BasicAuth": {
        "type": "http",
        "scheme": "basic"
      }
    },
    "schemas": {
      "FeatureCollection": {
        "type": "object",
        "description": "GeoJSON FeatureCollection containing flight level capping data.",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["FeatureCollection"]
          },
          "features": {
            "type": "array",
            "description": "Array of GeoJSON features.",
            "items": {
              "oneOf": [
                { "$ref": "#/components/schemas/FlightRoute" },
                { "$ref": "#/components/schemas/FlightRouteBuffer" },
                { "$ref": "#/components/schemas/CDR" },
                { "$ref": "#/components/schemas/RSA" },
                { "$ref": "#/components/schemas/Restriction" }
              ]
            }
          }
        }
      },
      "FlightRoute": {
        "type": "object",
        "description": "Mandatory FlightRoute feature.",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["Feature"]
          },
          "geometry": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["LineString"] },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": { "type": "number" }
                }
              }
            }
          },
          "properties": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["FlightRoute"] }
            },
            "additionalProperties": true
          }
        }
      },
      "FlightRouteBuffer": {
        "type": "object",
        "description": "Mandatory FlightRouteBuffer feature.",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["Feature"]
          },
          "geometry": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["Polygon"] },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": { "type": "array", "items": { "type": "number" } }
                }
              }
            }
          },
          "properties": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["FlightRouteBuffer"] }
            },
            "additionalProperties": true
          }
        }
      },
      "CDR": {
        "type": "object",
        "description": "Conditional Route Designation feature.",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["Feature"]
          },
          "geometry": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["LineString"] },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": { "type": "number" }
                }
              }
            }
          },
          "properties": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["CDR"] },
              "validTimeBeginPosition": { "type": "string", "format": "date-time" },
              "validTimeEndPosition": { "type": "string", "format": "date-time" },
              "lowerLimit": { "type": "integer" },
              "lowerLimitUom": { "type": "string" },
              "upperLimit": { "type": "integer" },
              "upperLimitUom": { "type": "string" },
              "designator": { "type": "string" },
              "direction": { "type": "string" },
              "conditionalRouteType": { "type": "string" }
            },
            "additionalProperties": true
          }
        }
      },
      "RSA": {
        "type": "object",
        "description": "Restricted Airspace feature.",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["Feature"]
          },
          "geometry": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["Polygon"] },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": { "type": "array", "items": { "type": "number" } }
                }
              }
            }
          },
          "properties": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["RSA"] },
              "validTimeBeginPosition": { "type": "string", "format": "date-time" },
              "validTimeEndPosition": { "type": "string", "format": "date-time" },
              "status": { "type": "string" },
              "designator": { "type": "string" },
              "designatorICAO": { "type": "string" },
              "level1": { "type": "boolean" },
              "level2": { "type": "boolean" }
            },
            "additionalProperties": true
          }
        }
      },
      "Restriction": {
        "type": "object",
        "description": "Restriction feature.",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["Feature"]
          },
          "geometry": {
            "type": "null"
          },
          "properties": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["Restriction"] },
              "validTimeBeginPosition": { "type": "string", "format": "date-time" },
              "validTimeEndPosition": { "type": "string", "format": "date-time" },
              "status": { "type": "string" },
              "designator": { "type": "string" },
              "processingIndicator": { "type": "string" },
              "instruction": { "type": "string" },
              "annotation": { "type": "string" }
            },
            "additionalProperties": true
          }
        }
      }
    }
  },
  "security": [
    {
      "BasicAuth": []
    }
  ]
}
